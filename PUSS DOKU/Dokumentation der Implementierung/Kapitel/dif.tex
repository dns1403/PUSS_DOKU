\section{Dokumentation der DIF-Dateien}
\label{sec:dif}
In diesem Kapitel werden die relevanten DIF-Dateien beschrieben, die wir für die Datenmigration von Untis in das Planungstool verwendet haben. 
Diese Dateien enthalten die Rohdaten, die aus Untis exportiert wurden, und bilden die Grundlage für die Erstellung der Planungsdatenbank im lokalen Planungstool.
Diese Dokumentation basiert auf der Dokumentation von Untis\footnote{siehe \url{https://www.untis.at/manual/index.html?ti_allgemeine-schnittstellen.htm}} welche ergänzt und an die Bedürfnisse des im Rahmen dieses Projekts entwickelten Mapping-Skripts angepasst wurde.
Außerdem kann in dieser Dokumentation eine vollständige Liste aller DIF-Dateien gefunden werden, insbesondere auch jene, die wir im folgenden nicht beschreiben.

\subsection{Notationshinweise und Legende}
Um die Struktur der Datenbanktabellen und deren Relation zu den DIF-Dateien zu verdeutlichen, wird in den folgenden Abschnitten eine einheitliche Notation verwendet. Diese beschreibt sowohl technische Constraints als auch den Grad der Normalisierung.

\paragraph{Bedeutung der Abkürzungen (Constraints)}
\begin{itemize}
    \item \textbf{PK (Primary Key):} Primärschlüssel der Tabelle.
    \item \textbf{FK (Foreign Key):} Fremdschlüssel, der auf eine andere Relation verweist.
    \item \textbf{NN (Not Null):} Dieses Feld darf keinen leeren Wert enthalten.
    \item \textbf{U (Unique):} Der Wert in diesem Feld muss innerhalb der Tabelle eindeutig sein.
\end{itemize}

\paragraph{Farblegende zur Normalisierung und Schlüsselstruktur}
In Anlehnung an die graphische Analyse der Datenbankstruktur werden folgende farbliche Markierungen in den Tabellenschemata verwendet:

\begin{table}[h]
    \centering
    \begin{tabular}{|l|l|l|}
        \hline
        \textbf{Farbe} & \textbf{Bezeichnung} & \textbf{Beschreibung} \\ \hline
        \cellcolor[HTML]{A4C2F4} Blau & Primärschlüssel (PK) & Felder, die den Datensatz eindeutig identifizieren. \\ \hline
        \cellcolor[HTML]{F9CB9C} Orange & Verletzung 2. NF & Felder, die funktional von einem Teil des Schlüssels abhängen. \\ \hline
        \cellcolor[HTML]{B7E1CD} Grün & Fremdschlüssel (FK) & Felder, die auf Daten einer anderen DIF-Datei verweisen. \\ \hline
    \end{tabular}
    \caption{Legende der verwendeten Notationsfarben}
    \label{tab:legende_notation}
\end{table}

\noindent
Sofern auf eine Spalte mehrere der o.~g. Eigenschaften zutreffen, so gilt die folgende Rangfolge bei der Farbauswahl: Normalformverletzungen vor Primärschlüssel vor Fremdschlüsseln.
Um dennoch auf einen Blick alle relevanten Spalteneigenschaften auf einen Blick erkennen zu können, werden den Spaltennamen der Primärschlüsselattribute ein \#, den Spaltennamen der Fremdschlüsselattribute ein Pfeil nach oben ($\uparrow$) vorangestellt.

\subsection{\texttt{GPU001} -- Stundenplan}
Die Datei \texttt{GPU001.TXT} enthält den Stundenplan. Da ein Unterrichtselement (Unterrichtsnummer) für mehrere Klassen gleichzeitig stattfinden kann (z.B. Koppelungen), bildet die Kombination aus Unterrichtsnummer, Klasse und Fach zusammen mit Tag und Stunde den Primärschlüssel.

\paragraph{Schema und Beispiel\-daten}

\paragraph{Erläuterung der Normalformverletzung}
\begin{table}[H]
        \centering
        \tiny
        \begin{tabular}{|c|c|c|c|c|c|c|c|c|}
            \hline
                               & \cellcolor[HTML]{A4C2F4} \textbf{\# $\uparrow$ Unterrichtsnummer} & \cellcolor[HTML]{A4C2F4} \textbf{\# $\uparrow$ Klasse} & \cellcolor[HTML]{F9CB9C} \textbf{$\uparrow$ Lehrer} & \cellcolor[HTML]{A4C2F4} \textbf{\# $\uparrow$ Fach} & \cellcolor[HTML]{B7E1CD} \textbf{$\uparrow$ Raum} & \cellcolor[HTML]{A4C2F4} \textbf{\# Tag} & \cellcolor[HTML]{A4C2F4} \textbf{\# Stunde} \\ \hline\hline
            \textbf{Datentyp} & INTEGER & TEXT & TEXT & TEXT & TEXT & INTEGER & INTEGER \\
            \textbf{Constraints} & NN, PK, FK & NN, PK, FK & NN, FK & NN, PK, FK & FK & NN, PK & NN, PK \\
            \textbf{Checks}    & & & & & & $\in \{1..7\}$ & \\ \hline
            \textbf{verletzte NF} & & & 2. NF & & & & \\ \hline
            \textbf{Beispiel}    & 1 & 07A & SMI & D & B2.16 & 2 & 7 \\
                               & 1 & 08A & AML & M & B2.12 & 1 & 4 \\ \hline
        \end{tabular}
        \caption{Schema der Relation Stundenplan (\texttt{GPU001}) mit Normalform-Hinweisen und Beispiel\-daten}
        \label{schema:gpu001_new}
    \end{table}

Das Attribut Lehrer hängt nur von den Attributen Unterrichtsnummer, Klasse und Fach ab, nicht aber von Tag und Stunde.
Wenn ein Fach mehrmals pro Woche unterrichtet wird, bleibt der Lehrer gleich, sodass Tag und Stunde für eine eindeutige Zuordnung nicht erforderlich sind.

\subsection{\texttt{GPU002} -- Unterricht}

Die Datei \texttt{GPU002.TXT} enthält die Unterrichts-Stammdaten. Sie definiert die grundlegenden Eigenschaften einer Unterrichtseinheit, unabhängig von ihrer zeitlichen Verplanung.

Da ein Unterricht (identifiziert über die Unterrichtsnummer) aus mehreren Zeilen bestehen kann (z.B. bei Klassenkopellungen), ist die Unterrichtsnummer allein nicht eindeutig. Ein Datensatz wird durch die Kombination aus Unterrichtsnummer, Klasse und Lehrer eindeutig bestimmt.

Im Kontext des Mappings wird diese Datei primär genutzt, um die \textbf{Studentenzahl} (Hörerzahl) für die Berechnung der Raumauslastung zu ermitteln.

\paragraph{Schema und Beispiel\-daten}

\paragraph{Erläuterung der relevanten Felder}
\begin{table}[H]
    \centering
    \tiny
    \begin{tabular}{|c|c|c|c|c|c|}
        \hline
                       & \cellcolor[HTML]{A4C2F4} \textbf{\# $\uparrow$ Unterrichtsnummer} & \cellcolor[HTML]{A4C2F4} \textbf{\# $\uparrow$ Klasse} & \cellcolor[HTML]{B7E1CD} \textbf{$\uparrow$ Lehrer} & \cellcolor[HTML]{A4C2F4} \textbf{\# $\uparrow$ Fach} & \textbf{Studentenzahl} \\ \hline\hline
        \textbf{Datentyp} & INTEGER & TEXT & TEXT & TEXT & INTEGER \\
        \textbf{Constraints} & NN, PK & NN, PK, FK & NN, FK & NN, PK, FK &  \\
        \textbf{Checks}    & & & & & $\ge 0$ \\ \hline
        \textbf{verletzte NF} & & & & & \\ \hline
        \textbf{Beispiel}    & 1 & 07A & SMI & D & 24 \\
                           & 1 & 07B & MUE & D & 26 \\ \hline
    \end{tabular}
    \caption{Schema der Relation Unterricht (\texttt{GPU002}) mit Normalform-Hinweisen und Beispiel\-daten}
    \label{schema:gpu002}
\end{table}
\begin{itemize}
    \item \textbf{Unterrichtsnummer:} Die eindeutige ID der Unterrichtseinheit. Sie dient als Verbindungsschlüssel zum Stundenplan (\texttt{GPU001}).
    \item \textbf{Klasse \& Lehrer:} Dienen als Fremdschlüssel auf die Dateien \texttt{GPU003} (Klassen) und \texttt{GPU004} (Lehrer). Zusammen mit der Unterrichtsnummer bilden sie den Primärschlüssel dieser Datei.
    \item \textbf{Studentenzahl:} Gibt an, wie viele Schüler an diesem spezifischen Unterrichtsteil teilnehmen. Dies ist essenziell für die Kapazitätsplanung der Räume im Planungstool.
\end{itemize}
\subsection{\texttt{GPU003} -- Klassen}
Die Datei \texttt{GPU003.TXT} enthält die Stammdaten der Klassen. Im Kontext des Mappings werden diese Daten auf die Entität \texttt{Studiengaenge} abgebildet. Eine Klasse entspricht dabei einer Kohorte oder einem Studiengangs-Jahrgang.

Der eindeutige Identifikator ist der Klassenname. Die Datei liefert zudem wichtige Informationen über die Schulstufe (Semester) und die Schulform (Prüfungsordnung).

\paragraph{Schema und Beispiel\-daten}

\paragraph{Erläuterung der relevanten Felder}
\begin{table}[H]
    \centering
    \tiny
    \begin{tabular}{|c|c|c|c|c|}
        \hline
                       & \cellcolor[HTML]{A4C2F4} \textbf{\# Name} & \textbf{Langname} & \textbf{Schul-Stufe} & \cellcolor[HTML]{B7E1CD} \textbf{$\uparrow$ Schulform} \\ \hline\hline
        \textbf{Datentyp} & TEXT & TEXT & INTEGER & TEXT \\
        \textbf{Constraints} & NN, PK & & NN & NN, FK \\
        \textbf{Checks}    & & & $>0$ & \\ \hline
        \textbf{verletzte NF} & & & & \\ \hline
        \textbf{Beispiel}    & 05A & Klasse 5A & 5 & G9 \\
                           & Q1 & Qualifikationsphase 1 & 11 & G8 \\ \hline
    \end{tabular}
    \caption{Schema der Relation Klassen (\texttt{GPU003}) mit Normalform-Hinweisen und Beispiel\-daten}
    \label{schema:gpu003}
\end{table}
\begin{itemize}
    \item \textbf{Name:} Das Kürzel der Klasse (z.B. "05A"). Dient als Primärschlüssel und wird im Planungstool zur \texttt{StudiengangsID}.
    \item \textbf{Schul-Stufe:} Gibt den Jahrgang an (z.B. 5, 6, 12). Dies wird auf das \texttt{Semester} gemappt.
    \item \textbf{Schulform:} Beschreibt den Zweig oder die Prüfungsordnung (z.B. G9-Gymnasium). Dies dient als Verknüpfung zur Stundentafel (\texttt{GPU011}).
\end{itemize}

\subsection{\texttt{GPU004} -- Lehrer}
Die Datei \texttt{GPU004.TXT} beinhaltet die Lehrer-Stammdaten. Diese werden im Planungstool als \texttt{Professor} interpretiert.

Der Identifikator ist das Lehrerkürzel (\texttt{Name}). Obwohl die Datei viele Attribute für die statistische Auswertung und Abrechnung enthält (z.B. Hohlstunden, Sollarbeitszeit), sind für die Raum- und Zeitplanung im Mapping primär das Kürzel und der Klarname relevant.

\paragraph{Schema und Beispiel\-daten}

\paragraph{Erläuterung der relevanten Felder}
\begin{table}[H]
    \centering
    \tiny
    \begin{tabular}{|c|c|c|c|c|}
        \hline
                       & \cellcolor[HTML]{A4C2F4} \textbf{\# Name} & \textbf{Langname} & \textbf{Vorname} & \textbf{Titel} \\ \hline\hline
        \textbf{Datentyp} & TEXT & TEXT & TEXT & TEXT \\
        \textbf{Constraints} & NN, PK & NN & & \\
        \textbf{Checks}    & max. 5 Zeichen & & & \\ \hline
        \textbf{verletzte NF} & & & & \\ \hline
        \textbf{Beispiel}    & MUE & Müller & Hans & Dr. \\
                           & SMI & Schmidt & Anna & \\ \hline
    \end{tabular}
    \caption{Schema der Relation Lehrer (\texttt{GPU004}) mit Normalform-Hinweisen und Beispiel\-daten}
    \label{schema:gpu004}
\end{table}
\begin{itemize}
    \item \textbf{Name:} Das eindeutige Lehrerkürzel. Dient als Primärschlüssel und wird als \texttt{ProfID} verwendet.
    \item \textbf{Langname, Vorname, Titel:} Dienen der Anzeige im Planungstool (z.B. "Dr. Hans Müller"). Im aktuellen Mapping-Skript wird vereinfachend oft nur das Kürzel verwendet, die Stammdaten stehen hier jedoch für eine Erweiterung bereit.
\end{itemize}

\subsection{\texttt{GPU005} -- Räume}
Die Datei \texttt{GPU005.TXT} enthält die Stammdaten der Räume. Im Mapping werden diese Daten auf die Entität \texttt{Raum} abgebildet.

Der eindeutige Identifikator ist der Raumname (z.B. Raumnummer). Für die Planung sind insbesondere die Kapazität (Sitzplätze) zur Prüfung von Überfüllung und die Lage-Informationen (Gang 1/2) zur Bestimmung des Gebäudes relevant.

\paragraph{Schema und Beispiel\-daten}

\paragraph{Erläuterung der relevanten Felder}
\begin{table}[H]
    \centering
    \tiny
    \begin{tabular}{|c|c|c|c|c|c|}
        \hline
                       & \cellcolor[HTML]{A4C2F4} \textbf{\# Name} & \textbf{Langname} & \textbf{Kapazität} & \textbf{Gang 1} & \textbf{Gang 2} \\ \hline\hline
        \textbf{Datentyp} & TEXT & TEXT & INTEGER & TEXT & TEXT \\
        \textbf{Constraints} & NN, PK & & & & \\
        \textbf{Checks}    & & & $\ge 0$ & & \\ \hline
        \textbf{verletzte NF} & & & & & \\ \hline
        \textbf{Beispiel}    & B2.16 & Bio 1 & 32 & Bau B & 2. OG \\
                           & TH1 & Turnhalle & 99 & Sport & \\ \hline
    \end{tabular}
    \caption{Schema der Relation Räume (\texttt{GPU005}) mit Normalform-Hinweisen und Beispiel\-daten}
    \label{schema:gpu005}
\end{table}
\begin{itemize}
    \item \textbf{Name:} Die eindeutige Bezeichnung des Raumes (z.B. "R101"). Dient als Primärschlüssel und wird im Planungstool zur \texttt{Raumnr}.
    \item \textbf{Kapazität:} Die maximale Anzahl an Personen (Sitzplätze). Dies wird auf \texttt{Sitzplatzzahl} gemappt.
    \item \textbf{Gang 1 / Gang 2:} Diese Felder enthalten oft Informationen über das Gebäude oder das Stockwerk. Im Mapping-Prozess werden diese beiden Felder kombiniert (konkateniert), um das Attribut \texttt{Gebaeude} im Planungstool zu befüllen.
\end{itemize}

\subsection{\texttt{GPU006} -- Fächer}
Die Datei \texttt{GPU006.TXT} enthält die Stammdaten der Unterrichtsfächer. Im Mapping werden diese Daten auf die Entität \texttt{Kurs} abgebildet.

Der eindeutige Identifikator ist das Fachkürzel (Name). Neben der Bezeichnung (Langname) kann hier auch ein fachgebundener Stammraum hinterlegt sein (z.B. Physik-Saal für Physik-Unterricht), was für die Raumplanung relevant sein kann.

\paragraph{Schema und Beispiel\-daten}

\paragraph{Erläuterung der relevanten Felder}
\begin{table}[H]
    \centering
    \tiny
    \begin{tabular}{|c|c|c|c|}
        \hline
                       & \cellcolor[HTML]{A4C2F4} \textbf{\# Name} & \textbf{Langname} & \cellcolor[HTML]{B7E1CD} \textbf{$\uparrow$ Raum} \\ \hline\hline
        \textbf{Datentyp} & TEXT & TEXT & TEXT \\
        \textbf{Constraints} & NN, PK & NN & FK \\
        \textbf{Checks}    & max. 10 Zeichen & & \\ \hline
        \textbf{verletzte NF} & & & \\ \hline
        \textbf{Beispiel}    & D & Deutsch & \\
                           & PH & Physik & PH1 \\ \hline
    \end{tabular}
    \caption{Schema der Relation Fächer (\texttt{GPU006}) mit Normalform-Hinweisen und Beispiel\-daten}
    \label{schema:gpu006}
\end{table}
\begin{itemize}
    \item \textbf{Name:} Das eindeutige Kürzel des Faches (z.B. "M" für Mathematik). Dient als Primärschlüssel und wird im Planungstool zur \texttt{KursID}.
    \item \textbf{Langname:} Die ausgeschriebene Bezeichnung des Faches. Wird auf \texttt{Kursname} und \texttt{KursnameEN} gemappt.
    \item \textbf{Raum:} Definiert optional einen festen Fachraum. Dies ist ein Fremdschlüssel auf die Datei \texttt{GPU005} (Räume). Auch wenn das aktuelle Mapping-Skript dieses Feld in der Tabelle \texttt{Kurs} noch nicht explizit übernimmt, ist es in den Rohdaten als "wichtig" klassifiziert.
\end{itemize}

\subsection{\texttt{GPU011} -- Stundentafel}
Die Datei \texttt{GPU011.TXT} enthält die Definitionen der Stundentafeln. Eine Stundentafel legt fest, welche Fächer in welchem Jahrgang und in welchem Zweig (Schulform) unterrichtet werden müssen.

Im Mapping wird diese Datei verwendet, um die Tabelle \texttt{Pflicht} zu generieren. Durch den Abgleich des Stundentafel-Namens mit der Schulform einer Klasse kann ermittelt werden, welche Kurse für einen Studiengang obligatorisch sind.

\paragraph{Schema und Beispiel\-daten}

\paragraph{Erläuterung der relevanten Felder}
\begin{table}[H]
    \centering
    \tiny
    \begin{tabular}{|c|c|c|c|c|c|}
        \hline
                       & \cellcolor[HTML]{A4C2F4} \textbf{\# Name} & \textbf{Langname} & \cellcolor[HTML]{A4C2F4} \textbf{\# $\uparrow$ Fach} & \textbf{Stundenzahl min.} & \textbf{Stundenzahl max.} \\ \hline\hline
        \textbf{Datentyp} & TEXT & TEXT & TEXT & INTEGER & INTEGER \\
        \textbf{Constraints} & NN, PK & NN & NN, PK, FK & & \\
        \textbf{Checks}    & & & & $\ge 0$ & $\ge 0$ \\ \hline
        \textbf{verletzte NF} & & & & & \\ \hline
        \textbf{Beispiel}    & G9-05 & Gymnasium G9 Stufe 5 & D & 4 & 5 \\
                           & G9-05 & Gymnasium G9 Stufe 5 & M & 4 & 4 \\ \hline
    \end{tabular}
    \caption{Schema der Relation Stundentafel (\texttt{GPU011}) mit Normalform-Hinweisen und Beispiel\-daten}
    \label{schema:gpu011}
\end{table}
\begin{itemize}
    \item \textbf{Name:} Der Identifikator der Stundentafel (z.B. "G9-05"). Dieser Wert korrespondiert mit dem Feld \texttt{Schulform} in der Datei \texttt{GPU003} (Klassen).
    \item \textbf{Fach:} Das Kürzel des Unterrichtsfaches. Dies ist ein Fremdschlüssel auf die Datei \texttt{GPU006} (Fächer) und wird im Planungstool zur \texttt{KursID}.
    \item \textbf{Stundenzahl min./max.:} Gibt den vorgesehenen Stundenumfang (Wochenstunden) für das Fach in dieser Stufe an. Obwohl diese Werte im aktuellen Mapping-Skript nicht direkt übertragen werden, sind sie für die Vollständigkeitsprüfung der Planung relevant.
\end{itemize}

\subsection{\texttt{GPU016} -- Zeitwünsche}
Die Datei \texttt{GPU016.TXT} enthält die Zeitwünsche und -sperren. Hier können Präferenzen für Lehrer, Klassen, Räume oder Fächer hinterlegt werden (z.B. "Lehrer Müller kann montags in der 1. Stunde nicht").

Im Mapping ist diese Datei essenziell für die Berechnung der Spalte \texttt{Wunschzeit} in der Tabelle \texttt{Plan}. Ein Datensatz definiert dabei für eine bestimmte Entität und einen bestimmten Zeitschlitz (Tag + Stunde) einen Prioritätswert.

Besonderheit: Diese Tabelle verwendet einen \textit{polymorphen Fremdschlüssel}. Das Feld \texttt{Kurzname} verweist je nach Inhalt des Feldes \texttt{Art} auf unterschiedliche Stammdatentabellen (Lehrer, Klassen, Räume oder Fächer).

\paragraph{Schema und Beispiel\-daten}

\paragraph{Erläuterung der relevanten Felder}
\begin{table}[H]
    \centering
    \tiny
    \begin{tabular}{|c|c|c|c|c|c|}
        \hline
                       & \cellcolor[HTML]{A4C2F4} \textbf{\# Art} & \cellcolor[HTML]{A4C2F4} \textbf{\# $\uparrow$ Kurzname} & \cellcolor[HTML]{A4C2F4} \textbf{\# Tag} & \cellcolor[HTML]{A4C2F4} \textbf{\# Stunde} & \textbf{Zeitwunsch} \\ \hline\hline
        \textbf{Datentyp} & TEXT & TEXT & INTEGER & INTEGER & INTEGER \\
        \textbf{Constraints} & NN, PK & NN, PK, FK & NN, PK & NN, PK & NN \\
        \textbf{Checks}    & $\in \{L, K, R, F\}$ & & $\in \{1..7\}$ & $>0$ & $\in \{-3..3\}$ \\ \hline
        \textbf{verletzte NF} & & & & & \\ \hline
        \textbf{Beispiel}    & L & SMI & 1 & 1 & -3 \\
                           & R & B2.16 & 5 & 7 & 1 \\ \hline
    \end{tabular}
    \caption{Schema der Relation Zeitwünsche (\texttt{GPU016}) mit Normalform-Hinweisen und Beispiel\-daten}
    \label{schema:gpu016}
\end{table}
\begin{itemize}
    \item \textbf{Art des Elements:} Unterscheidet, auf welche Entität sich der Wunsch bezieht:
        \begin{itemize}
            \item \texttt{L}: Lehrer (verweist auf \texttt{GPU004})
            \item \texttt{K}: Klasse (verweist auf \texttt{GPU003})
            \item \texttt{R}: Raum (verweist auf \texttt{GPU005})
            \item \texttt{F}: Fach (verweist auf \texttt{GPU006})
        \end{itemize}
    \item \textbf{Kurzname des Elements:} Der Identifikator der betroffenen Entität (z.B. Lehrerkürzel oder Raumnummer). Bildet zusammen mit Art, Tag und Stunde den Primärschlüssel.
    \item \textbf{Zeitwunsch:} Ein numerischer Wert, der die Priorität ausdrückt. Typische Untis-Skala:
        \begin{itemize}
            \item \texttt{-3}: Sperrung (Unterricht unmöglich)
            \item \texttt{0}: Neutral (kein Wunsch)
            \item \texttt{+3}: Dringender Wunsch (Unterricht bevorzugt)
        \end{itemize}
\end{itemize}
\subsection{Hilfsrelationen}
Die folgenden Relationen existieren nicht als physische DIF-Dateien. Sie werden während des Importprozesses generiert, um proprietäre Untis-Kodierungen (wie numerische Wochentage oder Unterrichtsstunden) in das Format der Zieldatenbank des Planungstools zu übersetzen.

\subsubsection{HourGrid -- Zeitraster}
Die Tabelle \texttt{HourGrid} definiert das Zeitraster der Schule. Sie bildet die abstrakte "Stunde" aus Untis (1. Stunde, 2. Stunde etc.) auf eine konkrete Startzeit und Dauer ab.

Diese Relation ist notwendig, um in der Zieltabelle \texttt{Timeslot} korrekte Uhrzeiten zu berechnen.

\paragraph{Schema und Beispiel\-daten}

\paragraph{Erläuterung der Felder}
\begin{table}[H]
    \centering
    \tiny
    \begin{tabular}{|c|c|c|c|}
        \hline
                       & \cellcolor[HTML]{A4C2F4} \textbf{\# Hour} & \textbf{Time} & \textbf{Duration} \\ \hline\hline
        \textbf{Datentyp} & INTEGER & INTEGER & INTEGER \\
        \textbf{Constraints} & NN, PK & NN & NN \\
        \textbf{Checks}    & $>0$ & $\in \{0..23\}$ & $>0$ \\ \hline
        \textbf{verletzte NF} & & & \\ \hline
        \textbf{Beispiel}    & 1 & 8 & 1 \\
                           & 2 & 9 & 1 \\ \hline
    \end{tabular}
    \caption{Schema der Hilfsrelation HourGrid}
    \label{schema:hourgrid}
\end{table}
\begin{itemize}
    \item \textbf{Hour:} Die Nummer der Unterrichtsstunde laut Untis (z.B. 1). Dient als Join-Schlüssel zur Tabelle \texttt{Stundenplan} (Spalte \texttt{Stunde}).
    \item \textbf{Time:} Die Startzeit der Stunde als Ganzzahl (z.B. 8 für 08:00 Uhr).
    \item \textbf{Duration:} Die Dauer der Einheit in Stunden-Schritten (hier vereinfacht auf 1 gesetzt).
\end{itemize}

\subsubsection{WeekdayMap -- Wochentage}
Die Tabelle \texttt{WeekdayMap} dient der Übersetzung der numerischen Wochentags-Repräsentation aus Untis in lesbare Textformate für das Planungstool.

\paragraph{Schema und Beispiel\-daten}

\paragraph{Erläuterung der Felder}
\begin{table}[H]
    \centering
    \tiny
    \begin{tabular}{|c|c|c|}
        \hline
                       & \cellcolor[HTML]{A4C2F4} \textbf{\# DIFTag} & \textbf{Weekday} \\ \hline\hline
        \textbf{Datentyp} & INTEGER & TEXT \\
        \textbf{Constraints} & NN, PK & NN, U \\
        \textbf{Checks}    & $\in \{1..7\}$ & \\ \hline
        \textbf{verletzte NF} & & \\ \hline
        \textbf{Beispiel}    & 1 & Montag \\
                           & 2 & Dienstag \\ \hline
    \end{tabular}
    \caption{Schema der Hilfsrelation WeekdayMap}
    \label{schema:weekdaymap}
\end{table}
\begin{itemize}
    \item \textbf{DIFTag:} Die numerische Repräsentation des Tages in den DIF-Dateien (1 = Montag). Dient als Join-Schlüssel zur Tabelle \texttt{Stundenplan} (Spalte \texttt{Tag}).
    \item \textbf{Weekday:} Der ausgeschriebene Name des Wochentags.
\end{itemize}

\subsubsection{ClassEncoding -- Klassenkodierung}
Die Tabelle \texttt{ClassEncoding} ist eine spezifische Hilfstabelle für das Mapping. Sie ordnet den Untis-Klassennamen (z.B. "05A") einer logischen Veranstaltungsgruppe (Veranstaltungsteil) zu. Dies ermöglicht es, Parallelklassen (05A, 05B etc.) im Planungstool sauber zu trennen oder Oberstufenkurse (Q1, Q2) spezifisch zu mappen.

\paragraph{Schema und Beispiel\-daten}

\paragraph{Erläuterung der Felder}
\begin{table}[H]
    \centering
    \tiny
    \begin{tabular}{|c|c|c|}
        \hline
                       & \cellcolor[HTML]{A4C2F4} \textbf{\# Klassenname} & \textbf{Veranstaltungsteil} \\ \hline\hline
        \textbf{Datentyp} & TEXT & TEXT \\
        \textbf{Constraints} & NN, PK & NN \\
        \textbf{Checks}    & & \\ \hline
        \textbf{verletzte NF} & & \\ \hline
        \textbf{Beispiel}    & 05A & 5.1 \\
                           & 05B & 5.2 \\
                           & Q1 & 12 \\ \hline
    \end{tabular}
    \caption{Schema der Hilfsrelation ClassEncoding}
    \label{schema:classencoding}
\end{table}
\begin{itemize}
    \item \textbf{Klassenname:} Der Name der Klasse wie in \texttt{GPU003} definiert. Dient als Join-Schlüssel.
    \item \textbf{Veranstaltungsteil:} Ein interner Identifikator für das Planungstool, der hilft, Kurse eindeutig Studiengangs-Instanzen zuzuordnen (z.B. wird die Klasse 05A zum Veranstaltungsteil 5.1).
\end{itemize}
