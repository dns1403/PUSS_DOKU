\section{Erweiterungen}

Für das Planungstool sind folgende Erweiterungen vorstellbar, deren mögliche Umsetzung in den nachfolgenden Unterkapiteln beschrieben wird.

\begin{itemize}

    \item Festlegung von jederzeit parallelen Lehrveranstaltungen

    \item Schwere Studiengangskonflichte bei Wahlpflichtveranstaltungen

    \item Automatisches Ignorieren zulässiger Konflikte

    \item Bessere Berücksichtigung von Wunschzeiten

    \item Normalisierungen im Schulkontext

\end{itemize}

\subsection{Festlegung von jederzeit parallelen Lehrveranstaltungen}

In der Schule gibt es bestimmte Veranstaltungen, die innerhalb eines Jahrgangs parallel gehalten werden müssen bzw. sollten (vereinzelt kann es Ausnahmen geben).
Beispiele in der Unter- und Mittelstufe sind die Religionskurse und die zweite Fremdsprache, sofern dort eine Wahlmöglichkeit an der jeweiligen Schule besteht, sowie die sog. Differenzierungskurse.
In der Oberstufe sind alle Veranstaltungen davon betroffen.

Die konkreten Veranstaltungskopplungen können der DIF-Datei \texttt{GPU019.TXT} (Unterrichtsfolge) entnommen werden.
Dort werden jeder Gruppe an parallelen Veranstaltungen die Unterrichtsnummern der betroffenen Veranstaltung zugeordnet.
Diese Information kann jedoch nicht direkt nach STULP übertragen werden.
Dazu muss zunächst das Datenbankschmema um eine weitere Relation \texttt{Unterrichtsfolge} erweitert werden.
Außerdem gibt es in STULP keine Unterrichtsnummer.
Daher muss neben den in der DIF-Relation bereits enthaltenen Spalten \texttt{Fach} und \texttt{Klassen} auch eine Spalte \texttt{Lehrer} mit dem entsprechenden Lehrerkürzel integriert werden.
Darüber hinaus ist zu beachten, dass die Werte in der Spalte \texttt{Klassen} nicht atomar sind und eine Normalisierung erfolgen sollte.

Wennn die Informationen über jederzeit parallele Veranstaltungen gespeichert sind, können damit zusätzliche Features realisiert werden.
Da die Veranstaltungen immer parallel liegen müssen, sollte ein blockweises verschieben ermöglicht werden.
Außerdem sollte eine Warnung geben, wenn versucht wird, die parallelen Veranstaltungen zu trennen und angezeigt werden, wenn die Parallelität verletzt ist.
Das kann z.~B. über einen neuen Konflikttyp realisiert werden.
Darüber hinaus sollten jederzeit parallele Kurse bei Studiengangskonflikten keine Berücksichtigung finden, denn unter der Annahme, dass die Veranstaltungskopplungen fix sind, muss jeder Schüler pro Gruppe paralleler Veranstaltungen max. eine davon besuchen.

Falls kein fertiger Stundenplan vorhanden ist, oder die Veranstaltungskopplungen neu definiert werden sollen, muss es die Möglichkeit geben, diese zu ändern.
Dazu ist eine neue Ansicht in STULP erforderlich, in der die jederzeit parallelen Veranstaltungen konfiguriert werden können.
Nachdem diese festgelegt wurden, würde dann, sofern der oben beschriebene neue Konflikttyp erstellt worden ist, bei der Stundenplanansicht zu sehen sein, wo die Kurse nicht parallel zueinander liegen.

\subsection{Schwere Studiengangskonflikte bei Wahlpflichtveranstaltungen}

In der aktuellen Modellierung werden Wahlpflichtveranstaltungen, wie z.~B. die zweite Fremdsprache oder Oberstufenkurse, in der Relation \texttt{Pflicht} als nicht verpflichtend eingetragen.
Es gibt jedoch sowohl in der Unter- und Mittelstufe als auch in der Oberstufe feste Gruppen von Kursen, aus denen jeder Schüler genau eine Veranstaltung besuchen muss.
Diese Veranstaltungen werden i.~d.~R. parallel gelegt, und so lange die Parallelität nicht aufgehoben wird, muss nicht unterschieden werden, ob eine Veranstaltung aus dieser Gruppe besucht werden muss oder nicht.
Wenn die Parallelität jedoch aufgehoben wird, sieht das anders aus.

Ab Klasse $7$ muss etweder Latein oder Französisch besucht, weshalb die entsprechenden Veranstaltungen klassenübergreifend gehalten werden und (meistens) parallel liegen.
Gleichzeitig muss auch u.~a. Deutsch besucht werden.
Wenn jetzt eine der Lateinveranstaltungen aus Jahrgang $7$ parallel zum Deutschunterricht einer der betroffenen Klassen gelegt werden würde, liegt somit ein Studiengangskonflikt vor.
In der bisherigen Konfliktmodellierung wäre dies nur ein leichter Studiengangskonflikt, da Latein nicht als Pflichtfach vermerkt ist.
Aufgrund der Tatsache, dass die oben beschriebene Kombination jedoch unzulässig ist, sollte dies ein harter Studiengangskonflikt sein.
Um dies zu realisieren, müsste die Konfliktüberprüfung in STULP so angepasst werden, dass ein schwerer Studiengangskonflikt vorliegt, sobald eine der betroffenen Veranstaltungen verpflichtend ist.

Bei einer Umsetzung dieser Änderung sollte jedoch bedacht werden, dass ein vergleichbarer Fall in der Uni durchaus zulässig sein kann.
Wenn die betroffene Wahlpflichtveranstaltung eine Übung ist, kann ein alternativer Übungstermin gewählt werden, wenn es eine Vorlesung ist, kann die Veranstaltung ggf. in einem anderen Semester belegt werden.

\subsection{Automatisches Ignorieren zulässiger Konflikte}

Insbesondere im Schulkontext gibt es eine Reihe zulässiger Konflikte.
Neben jederzeit parallelen (Wahlpflicht-)Veranstaltungen, die bereits im vorherigen Abschnitt thematisiert wurden, trifft dies auf zweiwöchig stattfindenden Nachmittagsunterricht und nur in einem Halbjahr stattfindenden Veranstaltungen zu.
Alle drei Ursachen können auf unterschiedliche Arten behandelt werden, die nachfolgend beschrieben werden.

\subsubsection{Konflikte durch jederzeit parallele Lehrveranstaltungen}

Dieser Fall ist aktuell durch Einträge in der Konfigurationsdatei \texttt{IgnoredConflicts.json} lösbar.
Dort müssen manuell alle jederzeit parallelen Veranstaktungen eingetragen werden.
Sofern die jederzeit parallelen Veranstaltungen jedoch in der STULP-Datenbank gespeichert würden, ist dies nicht mehr erforderlich.
Dann kann die Konfliktüberprüfung entsprechend angepasst werden, sodass nur Paare von Veranstaltungen berücksichtig werden, die nicht parallel liegen dürfen.
Alternativ würde dieser Fall auch abgedeckt werden, wenn die jederzeit parallelen Veranstaltungen in der STULP-Datenbank gespeichert würden und die Konfliktüberprüfung entsprechend angepasst wird.

\subsubsection{Konflikte durch zweiwöchigen Nachmittagsunterricht}

Beim Nachmittagsunterricht gibt es oft den Fall, dass dieser statt wöchentlich einstündig zweiwöchentlich doppelstündig gehalten wird.
In den DIF-Dateien ist der Nachmittagsunterricht jedoch als wöchtlich doppelstündlich eingetragen.
Dieser Fall kann prinzipiell in STULP gelöst werden, da eine Veranstaltung auch als zweiwöchentlich eingetragen werden kann.
Um das umzusetzen könnte man beim Mapping nach parallelem Nachmittagsunterricht suchen und die entsprechenden Einträge als zweiwöchentlich mit jeweils unterschiedlicher Startwoche eintragen.
Das setzt allerdings die Annahme voraus, dass der Stundenplan korrekt ist, da die DIF-Dateien keine Informationen über zweiwöchigen Untterricht enthalten.
Es könnte auch sein, dass mindestens eine der Veranstaltugen wöchentlich stattfinden muss, um auf die nötige Anzahl an Wochenstunden zu kommen.
Darüber hinaus ist die Startwoche dann zufällig gesetzt und könnte falsch sein.

\subsection{Konflikte durch halbjährlich alternierende Veranstaltugen}

In der Schule gibt es einige Veranstaltungen, die innerhalb eines Jahrgangs nur eine Stunde pro Woche unterricht werden müssen.
Oftmals werden diese daher nur für ein Halbjahr, dafür aber mit zwei Wochenstunden unterricht.
Eingetragen sind sie jedoch das ganze Jahr über.
Dadurch entstehen mitunter gleich mehrere Konflikte.
Offensichtlich enstehen Studiengangskonflikte, da beide Veranstaltungen belegt werden müssen.
Dieser Fall kann bereits mit der Konfigurationsdatei gelöst werden.

Es kann aber auch zu Raum- und Professorkonflikten kommen.
Häufig ist es nämlich so, dass ein Lehrer das gleiche Fach das ganze Jahr hinweg im gleichen Raum unterrichtet, zum Halbjahr jedoch die Klasse wechselt.
Ein möglicher Lösungsansatz besteht darin, zwei zusätzliche Felder in der Plan-Relation einzuführen, die angeben, ob die Veranstaltung nur ein halbjahr dauert, und in welchem Halbjahr sie liegt.
Diese Informationen können dann bei der Konfliktüberprüfung ausgelesen und berücksichtigt werden, sodass alle drei Fälle abgedeckt sind.

\subsection{Generelles Ignorieren vorhandener Studiengangskonflikte}

Unter der Annahme, dass der eingelesene Stundenplan korrekt ist, können im Zuge des Mappings auch alle Studiengangskonflikte berechnet und in der Relation \texttt{IgnoredConflict} eingetragen werden.
Die Konflikte werden dann in STULP nicht mehr angezeigt, aber sollten sie doch relevant sein, kann das Ignorieren in STULP jederzeit rückgängig gemacht werden.
Mit der aktuellen Modellierung lässt sich diese Variante allerdings nicht realisieren.
